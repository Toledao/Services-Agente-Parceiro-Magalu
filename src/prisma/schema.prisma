// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model Agente {
    id          String   @id @default(uuid())
    nome        String
    cpf         String   @unique
    email       String   @unique
    dataCriacao DateTime @default(now()) @map("data_criacao")
    senha       String

    Roteiro  Roteiro[]
    Parceiro Parceiro[]
    @@map("agentes")
}

model Roteiro {
    id          String     @id @default(uuid())
    dataVisita  DateTime   @map("data_visita")
    dataCriacao DateTime   @default(now()) @map("data_criacao")
    agenteId    String
    agente      Agente     @relation(fields: [agenteId], references: [id])
    parceiroId  String
    parceiro    Parceiro   @relation(fields: [parceiroId], references: [id])
    tipoVisita  TipoVisita @map("tipo_visita")

    @@map("roteiros")
}

enum TipoVisita {
    Presencial
    Videoconferencia
    Ligacao
}

model Parceiro {

    id                  String  @id @default(uuid())
    nome                String  @unique
    descricao           String
    cpnj                String  @unique
    telefone            String
    email               String
    endereco            String
    enderecoNumero      String
    bairro              String
    referencia          String
    cep                 String
    cidade              String
    estado              String
    enderecoComplemento String
    ativo               Boolean
    reponsavel          String
    agenteId            String
    agente              Agente  @relation(fields: [agenteId], references: [id])

    Roteiro Roteiro[]
}
